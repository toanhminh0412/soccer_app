{% extends 'base.html' %}
{% block title %}Games{% endblock %}
{% block content %}
<div class="container mt-150">
    <label class="fs-5 me-2 mt-5">View:</label>
    <select class="custom-select-tag mt-5">
        <option value="yours" selected>Your games</option>
        <option value="all">Browse games</option>
    </select>

    <!-- Display of all games -->
    <div class="mt-5 all-games-container d-none">
        {% for game in all_games %}
        <!-- Only render games that still have spaces -->
        {% if game.total_players < game.max_player_num %}
        {% include 'soccer/components/container/game.html' %}
        {% endif %}
        {% endfor %}
    </div>

    <!-- Display of your games -->
    <div class="mt-5 your-games-container">
        {% for game in all_games %}
        {% if user in game.get_players %}
        {% include 'soccer/components/container/game.html' %}
        {% endif %}
        {% endfor %}
    </div>
</div>

<script>
    // Toggle viewing your games or all games
    $('.custom-select-tag').on('change', function() {
        const value = $(this).val();
        if (value === 'yours') {
            $('.your-games-container').removeClass('d-none');
            $('.all-games-container').addClass('d-none');
        } else {
            $('.your-games-container').addClass('d-none');
            $('.all-games-container').removeClass('d-none');
        }
    })
</script>
{% endblock %}