{% extends 'base.html' %}
{% load soccer_extras %}
{% block title %}{{ group_detail.name }}{% endblock %}
{% block content %}
<div class="container mt-150">
    <!-- Group details -->
    <div class="box-container">
        <h2 class="text-underline">{{ group_detail.name }}</h1>
        <div class="mt-3">
            <div class="row">
                <div class="col-md-6"><strong class="me-2">Captains:</strong>{{ group_detail.get_captain.user.name }}</div>
                <div class="col-md-6"><strong class="me-2">Co-captains:</strong>{{ group_detail.get_cocaptains_str }}</div>
            </div>
            <div class="row">
                <div class="col-md-6"><strong class="me-2">Spaces left:</strong>{% if group_detail.max_member_num %}{{ group_detail.max_member_num|subtract:group_detail.members.count }} / {{group_detail.max_member_num}}{% else %}Unlimited{% endif %}</div>
            </div>
            <div class="mt-2"><strong class="me-2">Description:</strong>{{ group_detail.description }}</div>
        </div>
    </div>

    <label class="fs-5 me-2 mt-5">View:</label>
    <select class="custom-select-tag mt-5">
        <option value="games" selected>Games</option>
        <option value="members">Members</option>
    </select>

    <!-- Group members -->
    <div class="member-container box-container mt-3 d-none">
        <h1 class="mb-3">Members</h1>
        <div class="row">
            {% for member in group_detail.members.all %}
            <div class="col-6 tag-container text-center mt-1 bg-blue-200">{{member.name}}</div>
            {% endfor %}
        </div>
    </div>

    <div class="game-container mt-3">
        <h1 class="mb-3">Group games</h1>
        {% if group_detail.game_set.count != 0 %}
        {% for game in group_detail.game_set.all %}
        {% include 'soccer/components/container/game.html' %}
        {% endfor %}
        {% else %}
        <p class="fs-4 text-center">No games found</p>
        {% endif %}
    </div>
</div>

<script>
    // Toggle viewing games and members
    $('.custom-select-tag').on('change', function() {
        const value = $(this).val();
        if (value === 'games') {
            $('.game-container').removeClass('d-none');
            $('.member-container').addClass('d-none');
        } else {
            $('.game-container').addClass('d-none');
            $('.member-container').removeClass('d-none');
        }
    })
</script>
{% endblock %}